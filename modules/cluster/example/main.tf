terraform {
  required_version = ">= 0.13.0"
  required_providers {
    helm = {
      source  = "hashicorp/helm"
      version = ">= 0.1.0"
    }
  }
}

provider "helm" {
  kubernetes {
    host     = "https://k8s.appkins.net:6443"

    client_certificate     = base64decode("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJRjhaNGlXeVlNTG93RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TXpBek1qQXlNekUwTWpOYUZ3MHlOREF6TVRreU16RTBNalphTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXpGSXlJWTF0d0JBOVgrMmIKWjJHZ20xS0oyNDFRbkdsQURnUDh2ZmRSQ1doVzdwM1lhbUMxTUlKSG1IeU9UTkYzcmhhMmJLQ0Njbm9NeHl3WgpPNUw0bytRaFZPZWJPeitVc2luSVNOR0hnaVR2RElncEs5eFpzNzVFUTJ2cjgvN25ldGxCeW5oVEQ4YmhCeTdxCkVuRUZZbGN2bDVVdGZVaHhkak0zWVZTNUJ4amRSNHJLZXhDUU9rSExZOFlMbCszdzBid2U3UEtTOWlxRG9VNlAKbkhSNk5BWjFNNjdQT0MxdGxLK1ZDK2NaRnZ2SHZJWlluWlFSK3VEU1JPYUdSVFBMbFBqL294aXlUVDB4YVpneQpiU1puVjdPVUNsdFpKUGNtQjl6ZHFCNEI3NVliQ1llZWUyMVBJYytMRHBaVnhhd2NIWFRQZTJ6cEVBekNxK0FFCjE0UTZZUUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JTNFNzQzY3U01xVEFjOG4yTFFKc3l5VTRJcQprekFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBVDY1dHFmTEZsTlUzVkJ6VG13dUVBMjFuVW5VL3A1ZkR4NlhHCkllZTkxNnZBdG9NNU9oTDVpNDJ0TVM2bDNXS1UxR2xqUFQ5U2N4c0pHZGRKVmNBWEc4L1VVeERPTFZlU1p6NSsKQlBTVmgrZjYyN2VyYStaRlR2WTRaOVVNc0dEUklNWk5XNG8wb0I2bzV0Mi9IeURNc09kSzh0SjEyY085YStqQgp4dkw3cHdrWlo3cUJMK2tRb2VNTEJ2c1F4d3QycjVqbkcxZk5KWW92M2thdjk5Q2tMeGNSR1BaMEszQU9Kcm1hCjdGREZyaUdnbHZSY0V1S2FBWE9kR1RYdmNFaTRRUUlPUzZ2cko4a0RST2dsK28yWEphQkNCU3RIWmpRTmpwaHcKaG5qeFIwVEZvT1lTL1FZY2NlQzhreXBiTVZ1VFpEL1ZxNDF2WCtqV2ttanUzYTBRakE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==")
    client_key             = base64decode("LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBekZJeUlZMXR3QkE5WCsyYloyR2dtMUtKMjQxUW5HbEFEZ1A4dmZkUkNXaFc3cDNZCmFtQzFNSUpIbUh5T1RORjNyaGEyYktDQ2Nub014eXdaTzVMNG8rUWhWT2ViT3orVXNpbklTTkdIZ2lUdkRJZ3AKSzl4WnM3NUVRMnZyOC83bmV0bEJ5bmhURDhiaEJ5N3FFbkVGWWxjdmw1VXRmVWh4ZGpNM1lWUzVCeGpkUjRySwpleENRT2tITFk4WUxsKzN3MGJ3ZTdQS1M5aXFEb1U2UG5IUjZOQVoxTTY3UE9DMXRsSytWQytjWkZ2dkh2SVpZCm5aUVIrdURTUk9hR1JUUExsUGovb3hpeVRUMHhhWmd5YlNablY3T1VDbHRaSlBjbUI5emRxQjRCNzVZYkNZZWUKZTIxUEljK0xEcFpWeGF3Y0hYVFBlMnpwRUF6Q3ErQUUxNFE2WVFJREFRQUJBb0lCQURmeU5jbmNLUFlUUEVyOQpDN1ZtRlEwU3I2N1BaZ2crQlkwUTZHNjN2cGU5MnpmaFByWDZId0xXV1haV2ZMeHFDc1EvY2RvU3BVVmxTQVJ0CmZjZERPaFBlVG9ZcUdPWkRSWnIzTitGQWhrTkxpNjA1eDFROE5NK3p4SXRWakxrMXpmcGtiTkJjM0JtUTBtTWUKSkhmQ1BNQXRzVmxuUHBwMGNLVDE1eThlZkwrRlFJTUJLWitQN290bE5EVzVYQjV6cTFQQ1BNT0k4Z21DWlRrbgpRdUJzdVR5QWZkQWFvbWhiTGxlOUZNSW1yRGJzWHc3OVZtaHJtWUZ4S0ZFTGxjWjVvN2dkUWtkbXNMSHBWUnRFCjg4ZHpuTXFSQ0dSNnQ5ZW1YQmxRdGlCckdCY2Q2K0lmaTl2QlkzdEYzWSs3MnJGRFdoWDBQTjVlRTlOYTVMMWcKMVUxK3p5VUNnWUVBL1U1eEs5NVhpc3poSWhaVk1CMEM2VGhiU1NNSjhnWTlTQTcwcDVrMW5zUk14K28vc2pQQwpSdS9IZzhuTmltWE5jOS9iTlpWaXhDSGpobDAzZ0RpUU5IVEd4UTZSNnBIb2RVL1FvcHk4cG9ZdDVKTStmWHQ3ClpWU2oyUVNXTFZDTnBZMVJqWUh5cHMrTzlEaDNuRDEyc3p5TUJ1R0t5WTNFNm5Oc0x6QkowQjhDZ1lFQXpuNW4KaTNVRy95R2hOSnZ6cGdkaDNmY2pyelB6WE5jS2V6OFd5UVIrQzVnM0x0clBnQWxSVGp1aUR0Z09UNHNLUTQwUApRMDRDWmk4N0tCRC90ckFUbHFUczluT1dVSFlEVlhNWTBiTy9XOTc2TllyWFBINDlxRURNb21xMDZ1TWIvU05mCk1lVk53bllLVDJZZ29WbVBEUkxkRXVyWHNTZ2NSb1VZTWcvK3BYOENnWUF1bFFKUzR1eU9aZWJ3OGRKd3FxVWkKWm03RElHSnYwNTNwWm5hdmE0bGt6UXlocHY1WHN4VURIbzArT3hwRlhUdFBGOWVrSHZpdXdOeXFsUEhqN29MMgpZcE03SWRiTG9GRnpZVjRveVZJWC9ZenEvL2o1OG45YXZ4bnlpdGxqTS9FWWhNaCtrV3NpS2dGTUFDWmU0UjYzCkQyZGd6SkZOUjNqeTlJN3NqcURFV1FLQmdRREUxOGJKTURRTlBmZTRlUG5ZeWF6SHRYSDA4R2NMbDRyTVZpWFkKVmtuNXI0N2JRWWNRbk5FKzdLWGQxS1EvdTJGN1o1cW5KRlF4S05FUnJySzFha0FpR1BJek5aaVM5d3pTaGplZwpuK0xKSjFRSmVtTVhyWmdGTGxCa2U2Z2ZTWVJDMlZkRDd6MGpKUGRMSFNYNTZhL3VYSThXRzN5bHlvQzUwT0p4CnhzR083UUtCZ1FEb3p4R2hXOTByNnJRMkVtZDJFZ29tUnRhZnpOcmsrZTdUOXc1ejdDcU5zaXA5TkJ1V1JEaHoKZkVQbXZZdHlVRExMeEt2Ly9OMTRWM1UvL1RKdFV5MDZ6d0c4TXA4dFhrRWhwVmo4SGJ0WlJrcHlyeVdYZjZjZgpSRmMwSzYwZ2cwZzVJV1RlRmZSYk5KdW1veE8rYmdXeVhmcVVZS28vdks0aWhGMW9TcUJUTFE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=")
    cluster_ca_certificate = base64decode("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJek1ETXlNREl6TVRReU0xb1hEVE16TURNeE56SXpNVFF5TTFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTzl5CjR5ZVJOMHJyYjhZWWV3OU51Ri9ZT3Q0V2dCcEZ1LzFVRk1HbEhvYTBJOWRPQ1VkbHhMRWV3blZtS0lOdm1LQkwKaERQTndvL3FNY205TE9OZU1wN1NlKzRmQmR2ck5lRUZ3VWZNaUhLZStZSzNaYi95SjU4T3dPKzJRMm1Pc0dYVAovaGxBcEFFeHBxRktHclMxZXJ1ODZ1RjNLenJuV2grZFQ4cjRZaFNBd1Z3NmRFSkV6bGljV2hPcUMyaXROeFRtCmdDNnU2TUdocWhZMFU2dGpnZlNrQ1NPcjY1bDE5R294ZjlXVy85QmZzenBwRnhiMTd0MlY4QXUvczZKSTNucmkKNWtUME5sTlRnWFpFeTdXT3ZZVUJwdzRWOGxrSnl0V29zUzl2TnJKVmtldTk2NlkyTGRaa0VKcFJEcVRDSlhxKwpQS2ZiOThxSWQrbEh3OEVmUnVzQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZMaEt3THJ0SXlwTUJ6eWZZdEFtekxKVGdpcVRNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBQVVHNVFVU1ZDZytvNWU1U1QzQwpiREt1TnNvVlFuMlJodk5PVVN6cmJ0U3FPU0YvWDh4TVZaRUN2WjVrQkx6NFlmOFBBNGw1MXhRdGJIT09aZ0lJCk11K0tvQkF2NDN0SU8wd1pZUWdqR21DM1RXZFV2Sm94bk5oeGJkRUtQTU55dlZPRUdyelJEVTBpSGl0aWM4VWMKaUdTeVY2SFFSZjdLUTlxcTIrLzlqRlRYV2RKQlRVWVB2cm0rWS8rci94bUkrQVBCNGswNGZnVlRjU0NSWUFVawpzdEF2QkNaOHRSWEFYS3ZOaHBBMUJ3TVNSUDlTTEpOQjAzcWdIWlJwMVd2L2VJbkFPc3o0MXNtR203QmFJelUvCkREdUx2Y3FwbkpNa3dqbWV5YkRtWmlSb09xNUxya1dtRW0yalltdXMyV2llV2VaZEN0U3F3ejBVZnlZcWtlazEKNTlrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==")
  }
}

variable "ssh_password" {
  type = string
}

module "cluster" {
  source = "../"

  ssh = {
    username = "terraform"
    host     = "appkins.net"
    password = var.ssh_password
  }
}
